<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Documents - City of Oakland</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="top-bar">
        <button type="button" class="high-contrast-toggle" id="highContrastToggle" aria-pressed="false">High Contrast</button>
    </header>

    <header class="main-header">
        <div class="header-brand">
            <img src="assets/oakland_logo.png" alt="City of Oakland" class="header-logo">
        </div>
        <div class="header-actions">
            <span class="account-name">Test Test</span>
            <button type="button" class="icon-btn" aria-label="Menu" title="Menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
            <a href="index.html" class="icon-btn" aria-label="Logout" title="Logout">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
            </a>
        </div>
    </header>

    <main class="documents-main">
        <div class="documents-bar">
            <h2 class="documents-title">Your Documents</h2>
            <div class="documents-actions">
                <input type="file" id="fileUpload" accept=".pdf,.doc,.docx" multiple hidden>
                <button type="button" class="icon-btn icon-btn-add" id="addDocBtn" aria-label="Upload document" title="Upload document">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                </button>
                <button type="button" class="icon-btn icon-btn-trash" id="deleteDocBtn" aria-label="Delete selected" title="Delete selected">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                </button>
            </div>
        </div>

        <div class="documents-table-wrap">
            <table class="documents-table">
                <thead>
                    <tr>
                        <th class="th-select"><input type="checkbox" id="selectAll" aria-label="Select all"></th>
                        <th>Document Name</th>
                        <th>Date Added</th>
                        <th>Size</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="documentsBody">
                    <!-- Empty initially; rows added when user uploads -->
                </tbody>
            </table>
        </div>
    </main>

    <script>
        var fileInput = document.getElementById('fileUpload');
        var addBtn = document.getElementById('addDocBtn');
        var tbody = document.getElementById('documentsBody');

        addBtn.addEventListener('click', function () {
            fileInput.click();
        });

        fileInput.addEventListener('change', function () {
            var files = fileInput.files;
            if (!files.length) return;
            for (var i = 0; i < files.length; i++) {
                var f = files[i];
                var name = f.name;
                var size = f.size;
                var sizeStr = size < 1024 ? size + ' B' : size < 1024 * 1024 ? (size / 1024).toFixed(1) + ' KB' : (size / (1024 * 1024)).toFixed(1) + ' MB';
                var now = new Date();
                var dateStr = (now.getMonth() + 1) + '/' + now.getDate() + '/' + String(now.getFullYear()).slice(-2) + ' ' + (now.getHours() % 12 || 12) + ':' + String(now.getMinutes()).padStart(2, '0') + (now.getHours() >= 12 ? 'pm' : 'am');
                var tr = document.createElement('tr');
                tr.innerHTML = '<td class="td-select"><input type="checkbox" class="doc-checkbox" aria-label="Select row"></td><td>' + escapeHtml(name) + '</td><td>' + dateStr + '</td><td>' + sizeStr + '</td><td>â€”</td>';
                tbody.appendChild(tr);
            }
            fileInput.value = '';
        });

        document.getElementById('selectAll').addEventListener('change', function () {
            var check = this.checked;
            tbody.querySelectorAll('.doc-checkbox').forEach(function (cb) { cb.checked = check; });
        });

        document.getElementById('deleteDocBtn').addEventListener('click', function () {
            var selected = tbody.querySelectorAll('tr');
            var toRemove = [];
            selected.forEach(function (tr) {
                var cb = tr.querySelector('.doc-checkbox');
                if (cb && cb.checked) toRemove.push(tr);
            });
            toRemove.forEach(function (tr) { tr.remove(); });
        });

        function escapeHtml(s) {
            var div = document.createElement('div');
            div.textContent = s;
            return div.innerHTML;
        }
    </script>
    <script>
        (function () {
            var toggle = document.getElementById('highContrastToggle');
            var key = 'highContrast';
            function apply() {
                var on = localStorage.getItem(key) === 'true';
                document.body.classList.toggle('high-contrast-mode', on);
                if (toggle) toggle.setAttribute('aria-pressed', on);
            }
            if (toggle) {
                toggle.addEventListener('click', function () {
                    var on = localStorage.getItem(key) !== 'true';
                    localStorage.setItem(key, on ? 'true' : 'false');
                    apply();
                });
            }
            apply();
        })();
    </script>
</body>
</html>
